package program;

import java.sql.ResultSet;
import java.sql.SQLException;
import database.MySQLConnect;
import java.sql.Statement;

public class SetGPPromotion extends javax.swing.JDialog {

    private String TempCode;

    /** Creates new form SetGPPromotion */
    public SetGPPromotion(java.awt.Frame parent, boolean modal) {
        super(parent, modal);
        initComponents();
        LoadData();
    }

    /** This method is called from within the constructor to
     * initialize the form.
     * WARNING: Do NOT modify this code. The content of this method is
     * always regenerated by the Form Editor.
     */
    @SuppressWarnings("unchecked")
    // <editor-fold defaultstate="collapsed" desc="Generated Code">//GEN-BEGIN:initComponents
    private void initComponents() {

        jPanel1 = new javax.swing.JPanel();
        ChkP = new javax.swing.JCheckBox();
        ChkI = new javax.swing.JCheckBox();
        ChkF = new javax.swing.JCheckBox();
        ChkC = new javax.swing.JCheckBox();
        ChkE = new javax.swing.JCheckBox();
        ChkM = new javax.swing.JCheckBox();
        ChkT = new javax.swing.JCheckBox();
        ChkS = new javax.swing.JCheckBox();
        jLabel1 = new javax.swing.JLabel();
        bntOK = new javax.swing.JButton();

        setDefaultCloseOperation(javax.swing.WindowConstants.DISPOSE_ON_CLOSE);
        setTitle("กำหนดรายการส่วนลด Promotion");
        setFont(new java.awt.Font("Norasi", 0, 14)); // NOI18N

        jPanel1.setBorder(new javax.swing.border.LineBorder(java.awt.Color.lightGray, 2, true));

        ChkP.setFont(new java.awt.Font("Norasi", 0, 14)); // NOI18N
        ChkP.setText("ส่วนลดโปรโมชั่น");

        ChkI.setFont(new java.awt.Font("Norasi", 0, 14)); // NOI18N
        ChkI.setText("ส่วนลดรายการ");

        ChkF.setFont(new java.awt.Font("Norasi", 0, 14)); // NOI18N
        ChkF.setText("ส่วนลดเทศกาล");

        ChkC.setFont(new java.awt.Font("Norasi", 0, 14)); // NOI18N
        ChkC.setText("ส่วนลดคูปอง");

        ChkE.setFont(new java.awt.Font("Norasi", 0, 14)); // NOI18N
        ChkE.setText("ส่วนลดพนักงาน");

        ChkM.setFont(new java.awt.Font("Norasi", 0, 14)); // NOI18N
        ChkM.setText("ส่วนลดสมาชิก");

        ChkT.setFont(new java.awt.Font("Norasi", 0, 14)); // NOI18N
        ChkT.setText("ส่วนลด Trainee");

        ChkS.setFont(new java.awt.Font("Norasi", 0, 14)); // NOI18N
        ChkS.setText("ส่วนลดคูปองพิเศษ");

        javax.swing.GroupLayout jPanel1Layout = new javax.swing.GroupLayout(jPanel1);
        jPanel1.setLayout(jPanel1Layout);
        jPanel1Layout.setHorizontalGroup(
            jPanel1Layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
            .addGroup(jPanel1Layout.createSequentialGroup()
                .addGap(28, 28, 28)
                .addGroup(jPanel1Layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
                    .addComponent(ChkS)
                    .addComponent(ChkT)
                    .addComponent(ChkM)
                    .addComponent(ChkE)
                    .addComponent(ChkC)
                    .addComponent(ChkF)
                    .addComponent(ChkI)
                    .addComponent(ChkP))
                .addContainerGap(40, Short.MAX_VALUE))
        );
        jPanel1Layout.setVerticalGroup(
            jPanel1Layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
            .addGroup(jPanel1Layout.createSequentialGroup()
                .addGap(23, 23, 23)
                .addComponent(ChkP)
                .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.RELATED)
                .addComponent(ChkI)
                .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.RELATED)
                .addComponent(ChkF)
                .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.RELATED)
                .addComponent(ChkC)
                .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.RELATED)
                .addComponent(ChkS)
                .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.RELATED)
                .addComponent(ChkE)
                .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.RELATED)
                .addComponent(ChkM)
                .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.RELATED)
                .addComponent(ChkT)
                .addContainerGap(21, Short.MAX_VALUE))
        );

        jLabel1.setFont(new java.awt.Font("Norasi", 1, 14)); // NOI18N
        jLabel1.setText("รายการส่วนลด");

        bntOK.setFont(new java.awt.Font("Norasi", 1, 14)); // NOI18N
        bntOK.setText("ตกลง (OK)");
        bntOK.addActionListener(new java.awt.event.ActionListener() {
            public void actionPerformed(java.awt.event.ActionEvent evt) {
                bntOKActionPerformed(evt);
            }
        });

        javax.swing.GroupLayout layout = new javax.swing.GroupLayout(getContentPane());
        getContentPane().setLayout(layout);
        layout.setHorizontalGroup(
            layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
            .addGroup(layout.createSequentialGroup()
                .addGroup(layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
                    .addGroup(layout.createSequentialGroup()
                        .addGap(46, 46, 46)
                        .addComponent(jLabel1))
                    .addGroup(layout.createSequentialGroup()
                        .addGap(43, 43, 43)
                        .addComponent(bntOK, javax.swing.GroupLayout.PREFERRED_SIZE, 114, javax.swing.GroupLayout.PREFERRED_SIZE))
                    .addGroup(layout.createSequentialGroup()
                        .addContainerGap()
                        .addComponent(jPanel1, javax.swing.GroupLayout.PREFERRED_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.PREFERRED_SIZE)))
                .addContainerGap(javax.swing.GroupLayout.DEFAULT_SIZE, Short.MAX_VALUE))
        );
        layout.setVerticalGroup(
            layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
            .addGroup(layout.createSequentialGroup()
                .addContainerGap()
                .addComponent(jLabel1)
                .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.RELATED)
                .addComponent(jPanel1, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, Short.MAX_VALUE)
                .addGap(18, 18, 18)
                .addComponent(bntOK, javax.swing.GroupLayout.PREFERRED_SIZE, 50, javax.swing.GroupLayout.PREFERRED_SIZE)
                .addContainerGap())
        );

        java.awt.Dimension screenSize = java.awt.Toolkit.getDefaultToolkit().getScreenSize();
        setBounds((screenSize.width-218)/2, (screenSize.height-465)/2, 218, 465);
    }// </editor-fold>//GEN-END:initComponents

private void bntOKActionPerformed(java.awt.event.ActionEvent evt) {//GEN-FIRST:event_bntOKActionPerformed
    String TempStr = "";
    if (ChkP.isSelected()) {
        TempStr = TempStr + ",-P";
    }
    if (ChkI.isSelected()) {
        TempStr = TempStr + ",-I";
    }
    if (ChkF.isSelected()) {
        TempStr = TempStr + ",-F";
    }
    if (ChkC.isSelected()) {
        TempStr = TempStr + ",-C";
    }
    if (ChkS.isSelected()) {
        TempStr = TempStr + ",-S";
    }
    if (ChkE.isSelected()) {
        TempStr = TempStr + ",-E";
    }
    if (ChkM.isSelected()) {
        TempStr = TempStr + ",-M";
    }
    if (ChkT.isSelected()) {
        TempStr = TempStr + ",-T";
    }
    try {
        Statement stmt =  MySQLConnect.con.createStatement();
        String SQLQuery = "update branch set promotiongp='" + TempStr + "'";
        stmt.executeUpdate(SQLQuery);
        stmt.close();
    } catch (SQLException e) {
        PUtility.showError(e.getMessage());
    }
    this.dispose();


}//GEN-LAST:event_bntOKActionPerformed
    public void LoadData() {
        String TempPromotion = "";
        try {
            Statement stmt =  MySQLConnect.con.createStatement();
            String SQLQuery = "Select *from branch";
            ResultSet rec = stmt.executeQuery(SQLQuery);
            rec.first();
            if (rec.getRow() == 0) {
            } else {
                TempPromotion = rec.getString("promotiongp");
            }
            rec.close();
            stmt.close();
        } catch (SQLException e) {
            PUtility.showError(e.getMessage());
        }
        if (TempPromotion==null) {
            TempPromotion = "" ;
        }
                
        String TempStr = "" ;
        TempStr="-P" ;
       
        if (TempPromotion.indexOf(TempStr) > 0) {
            ChkP.setSelected(true);
        } else {
            ChkP.setSelected(false);
        }
        TempStr = "-I"  ;
        if (TempPromotion.indexOf(TempStr) > 0) {
            ChkI.setSelected(true);
        } else {
            ChkI.setSelected(false);
        }
        TempStr = "-F" ;
        if (TempPromotion.indexOf(TempStr) > 0) {
            ChkF.setSelected(true);
        } else {
            ChkF.setSelected(false);
        }
        TempStr = "-C" ;
        if (TempPromotion.indexOf(TempStr) > 0) {
            ChkC.setSelected(true);
        } else {
            ChkC.setSelected(false);
        }
        TempStr = "-S" ;
        if (TempPromotion.indexOf(TempStr) > 0) {
            ChkS.setSelected(true);
        } else {
            ChkS.setSelected(false);
        }
        TempStr = "-E" ;        
        if (TempPromotion.indexOf(TempStr)> 0) {
            ChkE.setSelected(true);
        } else {
            ChkE.setSelected(false);
        }
        TempStr = "-M" ;
        if (TempPromotion.indexOf(TempStr) > 0) {
            ChkM.setSelected(true);
        } else {
            ChkM.setSelected(false);
        }
        TempStr = "-T" ;
        if (TempPromotion.indexOf(TempStr) > 0) {
            ChkT.setSelected(true);
        } else {
            ChkT.setSelected(false);
        }
    }

    /**
     * @param args the command line arguments
     */
    public static void main(String args[]) {
        java.awt.EventQueue.invokeLater(new  

              Runnable() {
                      public void run() {
                SetGPPromotion dialog = new SetGPPromotion(new javax.swing.JFrame(), true);
                dialog.addWindowListener(new java 

                      .awt.event.WindowAdapter  
                        () {
                    public void windowClosing(java.awt.event.WindowEvent e) {
                        System.exit(0);
                    }
                });
                dialog.setVisible(true);
            }
        });
    }

    // Variables declaration - do not modify//GEN-BEGIN:variables
    private javax.swing.JCheckBox ChkC;
    private javax.swing.JCheckBox ChkE;
    private javax.swing.JCheckBox ChkF;
    private javax.swing.JCheckBox ChkI;
    private javax.swing.JCheckBox ChkM;
    private javax.swing.JCheckBox ChkP;
    private javax.swing.JCheckBox ChkS;
    private javax.swing.JCheckBox ChkT;
    private javax.swing.JButton bntOK;
    private javax.swing.JLabel jLabel1;
    private javax.swing.JPanel jPanel1;
    // End of variables declaration//GEN-END:variables
}
